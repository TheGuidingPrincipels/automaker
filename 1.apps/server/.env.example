# Automaker Server Configuration
# Copy this file to .env and configure your settings

# ============================================
# REQUIRED
# ============================================

# Your Anthropic API key for Claude models
ANTHROPIC_API_KEY=sk-ant-...

# ============================================
# OPTIONAL - Additional API Keys
# ============================================

# OpenAI API key for Codex/GPT models
OPENAI_API_KEY=sk-...

# Cursor API key for Cursor models
CURSOR_API_KEY=...

# OAuth credentials for CLI authentication (extracted automatically)
CLAUDE_OAUTH_CREDENTIALS=
CURSOR_AUTH_TOKEN=

# ============================================
# OPTIONAL - Security & Authentication
# ============================================

# API key for authenticating requests (leave empty to auto-generate)
# If set, all API requests must include X-API-Key header
AUTOMAKER_API_KEY=

# Skip the login prompt entirely in development (default: false)
# WARNING: Disabled when NODE_ENV=production for security
# Use this for local development to avoid copy/pasting API keys
AUTOMAKER_AUTO_LOGIN=true

# Disable authentication entirely (default: false)
# Use for local-only development or trusted networks
# WARNING: Anyone who can reach the server can access all features
AUTOMAKER_DISABLE_AUTH=false

# Authentication mode for Anthropic API (default: auth_token)
# - auth_token: Uses CLI OAuth (subscription mode). API keys completely ignored,
#               even if ANTHROPIC_API_KEY is set in the environment.
# - api_key: Uses stored or environment API key (pay-per-use mode).
#
# This is enforced at 4 levels: startup, provider, subprocess, and UI.
# In auth_token mode, there is ZERO possibility of accidental API key usage.
AUTOMAKER_ANTHROPIC_AUTH_MODE=auth_token

# Legacy: Disable API key authentication (deprecated, use AUTOMAKER_ANTHROPIC_AUTH_MODE instead)
# Mapping: true -> 'auth_token', false -> 'api_key'
# AUTOMAKER_DISABLE_API_KEY_AUTH=true

# Root directory for projects and file operations
# If set, users can only create/open projects and files within this directory
# Recommended for sandboxed deployments (Docker, restricted environments)
# Example: ALLOWED_ROOT_DIRECTORY=/projects
ALLOWED_ROOT_DIRECTORY=

# CORS origin - which domains can access the API
# Use "*" for development, set specific origin for production
CORS_ORIGIN=http://localhost:3007

# ============================================
# OPTIONAL - Server
# ============================================

# Host to bind the server to (default: 0.0.0.0)
# Use 0.0.0.0 to listen on all interfaces (recommended for Docker/remote access)
# Use 127.0.0.1 or localhost to restrict to local connections only
HOST=0.0.0.0

# Port to run the server on
PORT=3008

# Data directory for sessions and metadata
DATA_DIR=./data

# ============================================
# OPTIONAL - Terminal Access
# ============================================

# Enable/disable terminal access (default: true)
TERMINAL_ENABLED=true

# Password to protect terminal access (leave empty for no password)
# If set, users must enter this password before accessing terminal
TERMINAL_PASSWORD=

ENABLE_REQUEST_LOGGING=false

# ============================================
# OPTIONAL - UI Behavior
# ============================================

# Disable TTS in local Claude hooks for Automaker-spawned Claude CLI processes (default: true)
AUTOMAKER_DISABLE_HOOK_TTS=true

# Skip the sandbox warning dialog on startup (default: false)
# Set to "true" to disable the warning entirely (useful for dev/CI environments)
AUTOMAKER_SKIP_SANDBOX_WARNING=false

# ============================================
# OPTIONAL - Debugging
# ============================================

# Enable raw output logging for agent streams (default: false)
# When enabled, saves unprocessed stream events to raw-output.jsonl
# in each feature's directory (.automaker/features/{id}/raw-output.jsonl)
# Useful for debugging provider streaming issues, improving log parsing,
# or analyzing how different providers (Claude, Cursor) stream responses
# Note: This adds disk I/O overhead, only enable when debugging
AUTOMAKER_DEBUG_RAW_OUTPUT=false
