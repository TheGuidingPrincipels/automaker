# ğŸ“š Automaker Commands Guide

Quick reference for all available slash commands. Use these to get detailed context exactly when you need it.

---

## ğŸ¯ Quick Reference

| Command            | Category        | Use When...                        |
| ------------------ | --------------- | ---------------------------------- |
| `/automaker-arch`  | ğŸ—ï¸ Architecture | Starting any feature work          |
| `/worktree`        | ğŸŒ³ Worktree     | Port issues, parallel development  |
| `/new-feature`     | âœ¨ Features     | Building a new major feature       |
| `/env`             | âš™ï¸ Config       | Environment variable issues        |
| `/test-guide`      | ğŸ§ª Testing      | Running or debugging tests         |
| `/ai-library-api`  | ğŸ“š Knowledge    | Working on AI Library backend      |
| `/ai-library-ui`   | ğŸ¨ Knowledge    | Working on AI Library frontend     |
| `/session-cleanup` | ğŸ”„ Knowledge    | Session cleanup workflow           |
| `/sync`            | ğŸ”€ Git          | Syncing worktree with main         |
| `/review`          | ğŸ‘€ Review       | Pre-commit or pre-PR code review   |
| `/commands-meta`   | ğŸ“ Meta         | Creating/updating commands         |
| `/execute-plan`    | ğŸš€ Execution    | Generate prompt for plan execution |

---

## ğŸ—ï¸ Architecture & Development

### `/automaker-arch`

**Full architecture reference** - server structure, frontend patterns, SYSTEMS feature, data storage, event system, execution flow.

```
Use when:
â”œâ”€â”€ Starting work on any feature
â”œâ”€â”€ Need to understand where code lives
â”œâ”€â”€ Looking for service/route locations
â””â”€â”€ Debugging execution flow
```

### `/new-feature`

**Feature-first architecture guide** - directory structure templates, type definitions, canonical references.

```
Use when:
â”œâ”€â”€ Building a new major feature
â”œâ”€â”€ Need directory structure template
â”œâ”€â”€ Setting up frontend + backend + types
â””â”€â”€ Following feature-first patterns
```

### `/env`

**Environment variables reference** - all config options with defaults and descriptions.

```
Use when:
â”œâ”€â”€ Configuring the application
â”œâ”€â”€ Debugging startup issues
â”œâ”€â”€ Setting up new environment
â””â”€â”€ Understanding port configuration
```

---

## ğŸŒ³ Worktree & Git

### `/worktree`

**Worktree port configuration** - allocation table, .env setup, simultaneous operation rules.

```
Port Allocation:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Location     â”‚ UI Port â”‚ Server Port â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Main repo    â”‚ 3007    â”‚ 3008        â”‚
â”‚ feature-1    â”‚ 3017    â”‚ 3018        â”‚
â”‚ feature-2    â”‚ 3027    â”‚ 3028        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Use when:
â”œâ”€â”€ Port already in use errors
â”œâ”€â”€ Setting up new worktree
â”œâ”€â”€ Running parallel development
â””â”€â”€ Debugging worktree issues
```

### `/sync`

**Universal worktree sync** - synchronize branch with main with conflict prevention and data loss protection.

```
Syntax:
â”œâ”€â”€ /sync       â†’ Current worktree
â”œâ”€â”€ /sync 1     â†’ feature-1 worktree
â”œâ”€â”€ /sync 2     â†’ feature-2 worktree
â”œâ”€â”€ /sync:pr    â†’ Create PR instead of merge
â””â”€â”€ /sync 1:pr  â†’ PR mode for feature-1

Safety Features:
â”œâ”€â”€ Conflict prediction (git merge-tree)
â”œâ”€â”€ File overlap analysis
â”œâ”€â”€ Backup tags before merge
â”œâ”€â”€ Recovery procedures if things go wrong
â””â”€â”€ Detailed conflict resolution protocol

Use when:
â”œâ”€â”€ Merging worktree changes to main
â”œâ”€â”€ Need conflict preview before merge
â”œâ”€â”€ Want PR instead of direct merge
â””â”€â”€ Syncing after remote changes
```

---

## ğŸ§ª Testing

### `/test-guide`

**Complete testing guide** - E2E vs unit, commands, worktree testing, mock agent mode, debugging.

```
Quick Commands:
â”œâ”€â”€ npm run test          â†’ E2E (headless)
â”œâ”€â”€ npm run test:headed   â†’ E2E (visible)
â”œâ”€â”€ npm run test:server   â†’ Unit tests
â””â”€â”€ npm run test:all      â†’ Everything

Use when:
â”œâ”€â”€ Running tests
â”œâ”€â”€ Debugging test failures
â”œâ”€â”€ Setting up CI
â””â”€â”€ Understanding test structure
```

---

## ğŸ“š Knowledge Library (AI Library)

### `/ai-library-api`

**Backend API reference** - REST endpoints, schemas, WebSocket events, session lifecycle.

```
Use when:
â”œâ”€â”€ Working on Python backend
â”œâ”€â”€ Adding/modifying endpoints
â”œâ”€â”€ Understanding session workflow
â””â”€â”€ Debugging API issues
```

### `/ai-library-ui`

**Frontend components reference** - React structure, hooks, state machine, component hierarchy.

```
Use when:
â”œâ”€â”€ Working on React components
â”œâ”€â”€ Modifying workflow UI
â”œâ”€â”€ Understanding state management
â””â”€â”€ Adding new UI features
```

### `/session-cleanup`

**Session cleanup workflow** - phases, state machine, transitions, WebSocket events.

```
Workflow:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  idle â†’ file_staged â†’ creating_session                      â”‚
â”‚    â†’ cleanup_generating â†’ cleanup_review                    â”‚
â”‚    â†’ routing_generating â†’ routing_review                    â”‚
â”‚    â†’ ready_to_execute â†’ executing â†’ completed               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Use when:
â”œâ”€â”€ Working on cleanup feature
â”œâ”€â”€ Debugging state transitions
â”œâ”€â”€ Modifying workflow phases
â””â”€â”€ Understanding WebSocket events
```

---

## ğŸ‘€ Code Review

### `/review`

**Comprehensive code review** - launches 5 deepdive agents + 5 deepcode agents for analysis and automated fixes.

```
Syntax:
â”œâ”€â”€ /review           â†’ Uncommitted changes (working directory)
â”œâ”€â”€ /review 1         â†’ feature-1 worktree uncommitted changes
â”œâ”€â”€ /review main      â†’ Current branch vs main (branch comparison)
â”œâ”€â”€ /review develop   â†’ Current branch vs develop
â””â”€â”€ /review 1 develop â†’ feature-1 vs develop

Modes:
â”œâ”€â”€ Working directory â†’ Reviews uncommitted changes (git diff HEAD)
â””â”€â”€ Branch comparison â†’ Reviews all branch changes (git diff target...HEAD)

Use when:
â”œâ”€â”€ Pre-commit review of current work
â”œâ”€â”€ Pre-PR review (compare to main/develop)
â”œâ”€â”€ Security/quality review needed
â””â”€â”€ After major changes
```

---

## ğŸ”§ Build & Validation

### `/validate-tests`

**Run and fix tests** - intelligent test fixing workflow.

### `/validate-build`

**Run and fix builds** - build validation workflow.

---

## ğŸ“ Meta

### `/commands-meta`

**Command management guide** - creating new commands, updating existing ones, maintaining token efficiency.

```
Use when:
â”œâ”€â”€ Creating a new command
â”œâ”€â”€ Updating existing commands
â”œâ”€â”€ Understanding command architecture
â””â”€â”€ Maintaining token efficiency
```

---

## ğŸš€ Plan Execution

### `/execute-plan`

**Generate execution prompts** - create token-efficient prompts for downstream Claude Code sessions to implement plans.

```
Workflow:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  You provide plan â†’ This session generates prompt            â”‚
â”‚  â†’ Saved to docs/plan-prompts/ â†’ Use in downstream session   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Use when:
â”œâ”€â”€ Have an implementation plan to execute
â”œâ”€â”€ Multi-part plan chains (part N of M)
â”œâ”€â”€ Need concise handoff to downstream session
â””â”€â”€ Want structured execution instructions
```

---

## ğŸ—ºï¸ Decision Flowchart

```
What are you doing?
â”‚
â”œâ”€â–º Starting feature work?
â”‚   â””â”€â–º /automaker-arch
â”‚
â”œâ”€â–º Building new feature?
â”‚   â””â”€â–º /new-feature
â”‚
â”œâ”€â–º Port/worktree issues?
â”‚   â””â”€â–º /worktree
â”‚
â”œâ”€â–º Running tests?
â”‚   â””â”€â–º /test-guide
â”‚
â”œâ”€â–º Working on AI Library?
â”‚   â”œâ”€â–º Backend? â†’ /ai-library-api
â”‚   â”œâ”€â–º Frontend? â†’ /ai-library-ui
â”‚   â””â”€â–º Cleanup workflow? â†’ /session-cleanup
â”‚
â”œâ”€â–º Syncing changes?
â”‚   â””â”€â–º /sync [1|2] [:pr]
â”‚
â”œâ”€â–º Code review?
â”‚   â”œâ”€â–º Uncommitted changes? â†’ /review
â”‚   â””â”€â–º Branch comparison? â†’ /review main
â”‚
â”œâ”€â–º Environment config?
â”‚   â””â”€â–º /env
â”‚
â”œâ”€â–º Managing commands?
â”‚   â””â”€â–º /commands-meta
â”‚
â””â”€â–º Executing an implementation plan?
    â””â”€â–º /execute-plan
```

---

## ğŸ’¡ Tips

1. **Start lean**: CLAUDE.md is intentionally minimal (~85 lines). Load detailed context only when needed.

2. **Combine commands**: You can invoke multiple commands in one session if working across areas.

3. **Automaker agents**: These commands are for Claude Code sessions. Automaker's AI agents get context from `.automaker/context/` files automatically.

4. **Fork safety**: Always use `/sync` for git operations - it includes safety checks for the fork workflow.

5. **When in doubt**: `/automaker-arch` gives you the broadest context for general development work.
