# Upstream Changes Report - 2026-01-23 (Updated)

## Summary

- **Period**: 01859f3a..7a339408 (upstream/v0.14.0rc)
- **Previous Check**: 2026-01-23T08:41:00Z
- **Current Check**: 2026-01-23T12:47:00Z
- **New Commits Since Last Check**: 13 (non-merge)
- **Conflict Severity**: **MEDIUM**

> **Update**: 13 new commits have landed on `upstream/v0.14.0rc` since the earlier check today. The major addition is the **Projects Overview / Multi-Project Dashboard** feature.

## Breaking Changes

None detected. All changes are additive.

## New Features (Since Last Check)

| Feature                                         | Commit                       | Files Changed | Recommendation                                        |
| ----------------------------------------------- | ---------------------------- | ------------- | ----------------------------------------------------- |
| **Projects Overview / Multi-Project Dashboard** | c55654b7, ee4464bd           | 18 files      | **Adopt** - Major new feature                         |
| **Unified Sidebar Refinements**                 | 02dfda10, 433e6016, ea34f304 | 14 files      | **Adopt with merge** - Enhances previous sidebar work |
| **Dashboard View Enhancements**                 | c8ed3faf, 5939c5d2           | 3 files       | **Adopt** - UI improvements                           |

### Projects Overview Feature (High Value)

New multi-project dashboard functionality:

- `apps/server/src/routes/projects/routes/overview.ts` - Backend API for project status aggregation (317 lines)
- `apps/ui/src/components/views/overview-view.tsx` - Main dashboard view (519 lines)
- `apps/ui/src/components/views/overview/` - Project status card, activity feed, running agents panel
- `apps/ui/src/hooks/use-multi-project-status.ts` - Hook for fetching multi-project data
- `libs/types/src/project-overview.ts` - Type definitions (244 lines)
- `apps/ui/src/routes/overview.tsx` - Route definition
- E2E tests included

**Total additions**: +2,389 lines across 20 files

### Unified Sidebar Refinements

Continued refactoring of sidebar:

- Consolidated components into `sidebar/` folder structure
- Collapsible sections with `defaultCollapsed` property
- Dashboard link at top of sidebar
- Renamed "Auto-Maker Dashboard" title

## Bug Fixes (Since Last Check)

| Fix                                                     | Commit                       | Impact             |
| ------------------------------------------------------- | ---------------------------- | ------------------ |
| Fix feature status counting in overview handler         | ee4464bd                     | Dashboard accuracy |
| Verify initializeProject succeeds before state mutation | 68d78f2f                     | UI stability       |
| E2E test fixes for unified sidebar                      | a4214276                     | Test reliability   |
| PR review comments for overview view                    | 7e1095b7, 9d297c65, fb6d6bbf | Code quality       |

## Conflict Analysis

**Severity**: MEDIUM (unchanged from earlier)

### Merge Simulation Result

- Clean merge possible: **No**
- Conflicting files: 4

### Conflicting Files

| File                                                            | Watch Path? | Conflict Type        | Resolution Complexity |
| --------------------------------------------------------------- | ----------- | -------------------- | --------------------- |
| `apps/server/src/index.ts`                                      | ✅          | Import/route changes | Low                   |
| `libs/types/src/index.ts`                                       | ✅          | Export additions     | Low                   |
| `apps/ui/src/components/layout/sidebar/hooks/use-navigation.ts` | ✅          | Navigation structure | Medium                |
| `package-lock.json`                                             | ❌          | Lock file            | Auto-resolvable       |

### Conflict Details

#### 1. apps/server/src/index.ts

**Our changes**: Provider auth initialization at top

```typescript
import { initializeProviderAuthModes } from './lib/provider-auth-config.js';
initializeProviderAuthModes();
```

**Upstream changes**: Added projects routes import

```typescript
import { createProjectsRoutes } from './routes/projects/index.js';
```

**Resolution**: Keep both - different sections of file.

#### 2. libs/types/src/index.ts

**Our additions** (at end):

- Custom Agent types
- System types (multi-agent orchestration)
- Knowledge Hub types

**Upstream additions** (at end):

- Project Overview types (NEW)
- Test Runner types
- Gemini model types
- Feature Import/Export types

**Resolution**: Merge both export sections - no overlap.

#### 3. use-navigation.ts

**Our changes**: Added "Systems" section

```typescript
{
  label: 'Systems',
  items: [
    { id: 'agents', label: 'Agents', icon: Cpu },
    { id: 'systems', label: 'Systems', icon: Workflow },
    { id: 'knowledge-hub', label: 'Knowledge Hub', icon: BookOpenCheck },
  ],
}
```

**Upstream changes**:

- Added Dashboard/Overview item at top
- Made sections collapsible
- Changed icon imports

**Resolution**: Merge carefully - keep our Systems section AND adopt their Dashboard + collapsible features.

## Resolution Strategy: Merge + Verify

**Recommended Approach**: Manual resolution in test worktree

### Step 1: Create Test Worktree

```bash
git worktree add ../automaker-upstream-test -b test/upstream-merge-20260123
cd ../automaker-upstream-test
npm ci
```

### Step 2: Attempt Merge

```bash
git merge upstream/v0.14.0rc
```

### Step 3: Resolve Conflicts

**For `apps/server/src/index.ts`:**

- Keep our provider auth initialization at top
- Add upstream's projects routes import
- Register projects routes in the route setup section

**For `libs/types/src/index.ts`:**

- Keep our Custom Agent, System, Knowledge Hub exports
- Add upstream's Project Overview, Test Runner, Gemini exports

**For `use-navigation.ts`:**

- Add Dashboard/Overview item at top (from upstream)
- Keep our Systems section
- Adopt collapsible feature for sections
- Merge icon imports (add Home, keep Cpu, Workflow, BookOpenCheck)

### Step 4: Verify

```bash
npm run build:packages
npm run build:server
npm run test:server
PORT=4008 npm run dev:web  # Test on port 4007/4008
```

### Step 5: Merge to Main (after verification)

```bash
cd /Users/ruben/Documents/GitHub/automaker
git checkout main
git merge test/upstream-merge-20260123
git push origin main
git worktree remove ../automaker-upstream-test
```

## Verification Checklist

- [ ] Build succeeds (`npm run build`)
- [ ] Server tests pass (`npm run test:server`)
- [ ] No type errors (`tsc --noEmit`)
- [ ] UI loads at localhost:4007
- [ ] **NEW** Dashboard/Overview renders
- [ ] Sidebar collapsible sections work
- [ ] Our Systems section (Agents, Systems, Knowledge Hub) still works
- [ ] Projects Overview shows multi-project status

## Cherry-Pick Commands (Alternative)

If you prefer selective adoption:

```bash
# Projects Overview feature (recommended - high value)
git cherry-pick c55654b7  # feat(ui): add Projects Overview
git cherry-pick fb6d6bbf  # fix(ui): address PR review comments
git cherry-pick 9d297c65  # fix: address PR #644 review comments
git cherry-pick ee4464bd  # fix: update feature status counting

# Note: The sidebar changes are intertwined - full merge recommended
```

## Recommendations

1. **High Priority**: Adopt the Projects Overview feature - it's a major addition that complements our fork well
2. **Medium Priority**: Merge the unified sidebar changes carefully, preserving our Systems section
3. **Timing**: Consider doing the merge now while changes are fresh and well-understood
4. **Testing**: Run full validation in test worktree before merging to main

## Previous Features (From Earlier Today)

The earlier report covered:

- Gemini CLI Provider (f4803869)
- Test Runner Service (afa93dde)
- Feature Export/Import (2214c270)
- Remote Management (a9616ff3)
- Per-project Default Model (5ab53afd)
- Security: Command injection prevention (4ab927a5)

All of these are still recommended for adoption.

---

Generated by /upstream-check on 2026-01-23T12:47:00Z
Last checked commit: 01859f3a9a78d27ca64830db72c6b1d88dec8ebf
New baseline commit: 7a33940816edc9ea9c7fd1b610fa1700fc19d316 (upstream/v0.14.0rc)
