# Upstream Changes Report - 2026-01-20

## Summary

- **Period**: 2026-01-18 to 2026-01-20
- **Upstream Branch**: upstream/main
- **Total New Commits**: 1627
- **Analyzed Commits**: ~700 (after filtering merges/skip patterns)

> **Note**: 1627 commits is unusually high. The last checked commit (`518c818`) may have been set before much of the upstream development occurred. Recommend more frequent checks (daily) going forward.

## Commit Distribution

| Type      | Count |
| --------- | ----- |
| Features  | 336   |
| Bug Fixes | 209   |
| Refactors | 150   |
| Chores    | 98    |
| Other     | ~834  |

## Version Releases

- **v0.11.0** released (commit `78e5ddb4`)

## Breaking Changes

**None identified** - Two commits mention "breaking" but are informal comments, not formal breaking changes:

- `8f598d7c` - "gemini fixes and unbreaking scroll logic"
- `89216c01` - "fixes for windows, but maybe breaking linux"

## Security Updates (CRITICAL)

| Commit     | Description                                          | Action                |
| ---------- | ---------------------------------------------------- | --------------------- |
| `8ed2fa07` | Fix critical vulnerabilities in worktree init script | **Adopt immediately** |
| `469ee5ff` | Harden API authentication system                     | **Adopt immediately** |
| `3bc4b7f1` | Update qs to 6.14.1 (DoS vulnerability)              | **Adopt immediately** |
| `f4390bc8` | Add noopener,noreferrer to window.open               | Recommended           |
| `0e1e855c` | Enhance MCP server interaction security              | Recommended           |

## Major New Features

### High Priority (Recommend Adoption)

| Feature              | Commit     | Description                           |
| -------------------- | ---------- | ------------------------------------- |
| GitHub Copilot OAuth | `fec5f88d` | OAuth token validation for Copilot    |
| AI Commit Messages   | `e56db236` | Auto-generate commit messages         |
| Memory Management    | `09527b3b` | New memory management feature with UI |
| Cursor Provider      | Multiple   | Full Cursor CLI integration           |
| OpenCode/Codex       | Multiple   | OpenCode CLI support with Docker      |

### Medium Priority

| Feature               | Commit     | Description                          |
| --------------------- | ---------- | ------------------------------------ |
| Mobile Responsiveness | Multiple   | Improved mobile experience           |
| Project Themes        | `8419b12f` | Theme selection in context menu      |
| Dev Server Log Panel  | `073f6d57` | Real-time log streaming              |
| Worktree Init Scripts | `05d96a7d` | Init script functionality            |
| Resume Interrupted    | `71154608` | Resume interrupted features endpoint |
| Bulk Delete           | `9c5fe446` | Bulk delete for features             |

### Low Priority / Skip

| Feature                   | Reason            |
| ------------------------- | ----------------- |
| OpenRouter icon           | Minor UI addition |
| VS Code Insiders support  | If not needed     |
| Various UI polish commits | Optional          |

## Infrastructure Changes

### Launcher Migration (Important)

- Changed from `start-automaker.sh` to `start-automaker.mjs`
- Affects `npm run dev` and `npm run start`
- **Recommendation**: Review and adopt if Windows support needed

### New Dependencies

- OpenAI/Google API key support added to settings
- Codex/OpenCode model discovery

## Impact on Your Modifications - DETAILED ANALYSIS

### Conflict Analysis Result: ✅ ZERO CONFLICTS

A `git merge-tree` simulation confirms the merge would succeed **cleanly with no conflicts**.

### File Overlap Analysis

**Files modified by both sides:** NONE

| Category      | Our Fork | Upstream | Overlap |
| ------------- | -------- | -------- | ------- |
| apps/server/  | 22 files | 0 files  | 0       |
| apps/ui/      | 24 files | 3 files  | **0**   |
| libs/types/   | 3 files  | 0 files  | 0       |
| libs/prompts/ | 0 files  | 0 files  | 0       |

### Upstream's 3 UI File Changes (Detail)

| File                                | Change Type                                | Impact on Fork                                 |
| ----------------------------------- | ------------------------------------------ | ---------------------------------------------- |
| `constants.ts`                      | Added `THEME_SUBMENU_CONSTANTS` (32 lines) | **Clean merge** - adds before existing exports |
| `project-context-menu.tsx`          | Enhanced viewport-aware theme submenu      | **No conflict** - we don't modify this file    |
| `project-selector-with-options.tsx` | Added scroll handling + collision padding  | **No conflict** - we don't modify this file    |

### Why No Conflicts

1. **Our additions are isolated**: Custom agents, systems, knowledge hub are in separate:
   - Routes: `agents.tsx`, `systems.tsx`, `knowledge-hub.tsx`
   - Services: `custom-agents-service.ts`, `systems-service.ts`, `knowledge-service.ts`
   - Components: `agents-page/`, `systems-page/`, `knowledge-hub-page/`

2. **Upstream changes are additive**: They add new constants and enhance existing components, not remove/restructure

3. **No shared code paths**: Our `SIDEBAR_FEATURE_FLAGS` and their `THEME_SUBMENU_CONSTANTS` are independent exports in constants.ts

### Merge Recommendation: ✅ SAFE TO MERGE

```bash
# Create merge branch
git checkout -b upstream-merge-2026-01-20

# Merge upstream
git merge upstream/main -m "Merge upstream/main (v0.11.0)"

# The merge will succeed cleanly
# Run tests to verify
npm run test:all

# Create PR
gh pr create --repo TheGuidingPrincipels/automaker --base main
```

## Cherry-Pick Commands

### Security Fixes (Do First)

```bash
# Critical security fixes
git cherry-pick 8ed2fa07  # Worktree init script vulnerabilities
git cherry-pick 469ee5ff  # API authentication hardening
git cherry-pick 3bc4b7f1  # qs DoS vulnerability fix
git cherry-pick f4390bc8  # window.open security
```

### High-Value Features

```bash
# AI commit messages
git cherry-pick e56db236

# Memory management (may require multiple commits)
git log --oneline upstream/main | grep -i memory

# GitHub Copilot support
git cherry-pick fec5f88d
```

## Recommendations

1. **Immediately**: Cherry-pick security fixes (4 commits)
2. **High Priority**: Review AI commit message feature - complements your workflow
3. **Medium Priority**: Consider memory management feature if useful for your SYSTEMS feature
4. **Consider**: Mobile responsiveness if mobile access is needed
5. **Setup**: Increase check frequency to every 1-3 days given activity level

## Merge Strategy

Given 1627 commits, a full merge is recommended over cherry-picking:

```bash
# Create a merge branch
git checkout -b upstream-merge-2026-01-20

# Merge upstream
git merge upstream/main

# Resolve conflicts (expect few given low watch path changes)
# Test thoroughly
# Create PR to main
```

## Files Changed Summary

```
6 files changed, 485 insertions(+), 23 deletions(-)
 apps/ui/src/components/layout/sidebar/constants.ts  | 31 ++++
 package.json                                        | 4 +-
 start-automaker.mjs                                 | 201 +++++++++++++++++++++
 start-automaker.sh                                  | 60 +++++-
```

---

Generated by `/upstream-check` on 2026-01-20T16:19:32
Last checked commit: `518c81815ef27e2ab2765356492e30ceb483c56c`
New baseline commit: `cf3ee6aec6589785116b2ec3329e1a2a0377dcfe`
